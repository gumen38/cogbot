<fieldset id="current">
    <legend>Current strategy</legend>
    <div><b><%=status%></b></div>
    <%
        var rec = record, det = heroDetails, sol = soldiersData;//underscore visibility scope trick
        function info(code){
            var hero = rec.deploy.HeroSet_SetTroopStrategy_Req.attackTroopStrategy[code];
            if( hero == -1 ) return "N/A";
            if( !det[hero] ) return "None";

            var soldierName = "-";
            if( rec.assigns[hero] ) {
                var soldierId = rec.assigns[hero].Hero_DeploySoldier_Req.soldierId;
                soldierName = soldierId == 0 ? 'none' : (sol[soldierId] ? sol[soldierId].name : soldierId);
            }

            return det[hero].name + "<br/>[" + soldierName + "]";
        }
%>
<% if ( sync ) { %>
<table>
    <tr><td><%= info('11') %></td><td><%= info('12') %></td><td><%= info('13') %></td><td><%= info('14') %></td></tr>
    <tr><td><%= info('21') %></td><td><%= info('22') %></td><td><%= info('23') %></td><td><%= info('24') %></td></tr>
</table>
<% if( depleted ) { %><div style="font-weight:900; font-size: 14px; color:red">!!!Soldiers depleted!!!<br/> <%=depleted%> <a href="#" fire="strategy" args="{ reset: {}}">Ok</a> </div><% } %>
<% } else { %>
        <div>Capturing session... <span class="hint" hint="400">(?)</span></div>
        <div class="hint-info" hint="400">The CogBot Server is waiting for requests from game to game server</br>
            in order to capture game session code from the request.</br>
            If game was started before you have started bot, just do some activity in game, e.g. maximize soldiers
        </div>
<% } %>
</fieldset>

<% if ( sync ) { %>
<fieldset id="save">
        <legend><span class="hint" hint="saveStr1">Save formation and assigns</span></legend>
        <ul>
            <li><a class="btn" fire="strategy" args="{save: 'default'}" href="#">Save now as Primary Default Strategy</a></li>
            <li><a class="btn" fire="strategy" args="{save: 'defaultalt'}" href="#">Save now as Secondary Default Strategy</a></li>
            <li><a class="btn" fire="strategy" args="{save: 'wboss'}" href="#">Save now for World Boss</a>       </li>
        </ul>
        <div class="hint-info" hint="saveStr1">Save current attack formation and assigned soldiers. <br/>
            Secondary strategy is used when CogBot fails to load primary strategy due to depleted soldiers.<br/>
            Use it to rotate similar unit types, like Barks and Cateran Cavaliers.
            It will help you to reduce TSC usage and recruiting efforts.
        </div>
</fieldset>
<% } %>

<% if ( sync ) { %>
<fieldset id="load" class="<%=settings.minimize.load ? 'minimized' :'' %>">
    <legend>Loading information</legend>
    <% if( loaded ) { %>
    <div>Strategy <%=strategyCode%> was automatically loaded</div>
    <% } %>
    <div><a class="btn" href="#" fire="strategy" args="{load: 'default'}">Apply Primary Default Strategy</a></div>
    <div><a class="btn" href="#" fire="strategy" args="{load: 'defaultalt'}">Apply Secondary Default Strategy</a></div>
</fieldset>
<% } %>
